<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta property="og:title" content="Vite MCP Client Tools Plugin" />
    <meta property="og:type" content="article" />
    <meta property="og:description" content="A Vite plugin that brings client-side MCP tools to allow your coding agent to see your app in action" />
    
    <meta
      property="og:image"
      content="https://ates.dev/posts/2025-10-13-vite-plugin-mcp-client-tools/i/vite-plugin-mcp-client-tools.webp"
    />
    <meta property="og:image:alt" content="A diagram depicting how the plugin components interact with each other" />
    
    <meta property="og:locale" content="en_CA" />
    <meta property="og:site_name" content="ates.dev" />
    <title>ates.dev &middot; Vite MCP Client Tools Plugin</title>
    <script>
      (() => {
        const themeOverride = localStorage.getItem('theme-override');
        const lightMode = themeOverride && themeOverride === 'light';
        document.documentElement.classList.toggle('light-mode', lightMode);
      })();
    </script>
    <link
      rel="preload"
      href="/assets/fonts/varelaround-regular-webfont.woff2"
      as="font"
      crossorigin="anonymous"
    />
    <link
      rel="preload"
      href="/assets/logos/bluesky.svg"
      as="image"
      crossorigin="anonymous"
    />
    <link
      rel="preload"
      href="/assets/logos/github.svg"
      as="image"
      crossorigin="anonymous"
    />
    <link
      rel="icon"
      type="image/png"
      href="/assets/icons/favicon-96x96.png"
      sizes="96x96"
    />
    <link rel="icon" type="image/svg+xml" href="/assets/icons/favicon.svg" />
    <link rel="shortcut icon" href="/assets/icons/favicon.ico" />
    <link
      rel="apple-touch-icon"
      sizes="180x180"
      href="/assets/icons/apple-touch-icon.png"
    />
    <meta name="apple-mobile-web-app-title" content="ates.dev" />
    <link rel="manifest" href="/assets/icons/site.webmanifest" />
    <link rel="stylesheet" href="/styles/style.css?bust=1" />
    <link rel="me" href="https://bsky.app/profile/ates.dev" />
    <link rel="me" href="https://www.dwitter.net/u/magna" />
    <link rel="me" href="https://github.com/atesgoral" />
    <link rel="me" href="https://www.npmjs.com/~atesgoral" />
    <link rel="me" href="https://hackaday.io/atesgoral" />
    <link rel="me" href="https://www.instagram.com/atesgoral" />
    <link rel="me" href="https://stackoverflow.com/users/23501/ates-goral" />
    <link rel="me" href="https://www.linkedin.com/in/atesgoral/" />
    <link rel="me" href="https://twitter.com/atesgoral" />
    <link rel="me" href="https://x.com/atesgoral" />
    <link rel="me" href="https://mastodon.social/@magna" />
    <link
      rel="alternate"
      type="application/rss+xml"
      title="RSS Feed"
      href="/feed.xml"
    />
    <script src="/assets/js/prog.js?bust=1"></script>
  </head>
  <body>
    
    <header>
      <h1>
        <a href="/">ates.dev</a>
      </h1>
      <nav>
        <ul>
          <li>
            <a href="/">Home</a>
          </li>
          <li>
            <a
              href="/pages/all-posts"
              >Posts</a
            >
          </li>
          <li>
            <a
              href="/pages/all-pages"
              >Pages</a
            >
          </li>
          <li>
            <a
              href="/pages/about"
              >About</a
            >
          </li>
          <li class="break"></li>
          <li>
            <a
              href="https://bsky.app/profile/ates.dev"
              rel="me"
              class="bluesky logo"
              >Bluesky</a
            >
          </li>
          <li>
            <a href="https://github.com/atesgoral" rel="me" class="github logo"
              >GitHub</a
            >
          </li>
          <li>
            <a href="/feed.xml" rel="me" class="rss logo">RSS</a>
          </li>
        </ul>
      </nav>
    </header>

    <main>
<article>
  <h2>Vite MCP Client Tools Plugin</h2>
  <p class="meta">Posted on Oct 13, 2025</p>

  <div class="content"><h3 id="tldr" tabindex="-1"><a class="permalink" href="#tldr">tl;dr</a></h3>
<p><a href="https://www.npmjs.com/package/vite-plugin-mcp-client-tools">A Vite plugin</a> that brings client-side MCP tools to allow your coding agent to see your app in action. Uses your existing Vite development server, so you don't have to run a separate MCP server.</p>
<h3 id="short-story" tabindex="-1"><a class="permalink" href="#short-story">Short story</a></h3>
<p>I've been enamored with getting coding agents to self-improve by telling them to write MCP servers for themselves.</p>
<p>This is the outcome of one such experiment where I was getting frustrated by the agent's enthusiastic &quot;Perfect!&quot; exclamations while it had no idea what the UI it was modifying looked like. I told the agent to add an MCP server to the existing Vite server that's serving the UI, and to add two tools: A screenshot tool so it can see the browser window whenever it wants, and a console log tool so it can see errors and diagnostic messages.</p>
<p>Once the proof of concept worked, I put aside the agent to properly (manually) architect the plugin and made it extensible for new tools.</p>
<h3 id="installation-and-configuration" tabindex="-1"><a class="permalink" href="#installation-and-configuration">Installation and configuration</a></h3>
<p>Adding the Vite plugin and its tools to a project looks like this:</p>
<pre><code class="language-sh">npm install vite-plugin-mcp-client-tools
</code></pre>
<pre><code class="language-js">import { defineConfig } from 'vite';
import { viteMcpPlugin } from "vite-plugin-mcp-client-tools";
import { readConsoleTool } from "vite-plugin-mcp-client-tools/tools/read-console";
import { takeScreenshotTool } from "vite-plugin-mcp-client-tools/tools/take-screenshot";

export default defineConfig({
  plugins: [
    viteMcpPlugin({
      tools: [readConsoleTool, takeScreenshotTool],
    }),
  ],
});
</code></pre>
<h3 id="usage" tabindex="-1"><a class="permalink" href="#usage">Usage</a></h3>
<p>Then the agent needs to be configured with the MCP server exposed by the plugin, running on the very same Vite development server.
Depending on the coding agent that you use, you may have to edit an MCP configuration file. For Claude Code, you can run something like this:</p>
<pre><code class="language-sh">claude mcp add vite-server-client-tools --transport http http://localhost:3000/mcp
</code></pre>
<p>Once the agent knows about these tools, it will automatically start using them, unprompted. Magic will ensue. It will start taking screenshots to see the result of its changes (and the reason for your complaints) and it will start peeking at the console to see what's happening in JavaScript land in the browser. Unless it doesn't. Then you might have to nudge it to start using the tools.</p>
<p>Hint: If you let your agent start the Vite development server as a background process, it can also see how the server is doing, by tailing its output.</p>
<h3 id="tool-contract" tabindex="-1"><a class="permalink" href="#tool-contract">Tool contract</a></h3>
<p>Beyond the standard MCP tool definition components, <code>name</code>, <code>description</code>, <code>inputSchema</code>, and <code>outputSchema</code>, each tool consists of:</p>
<ul>
<li>A <code>handler</code> function that implements the tool's logic.</li>
<li>An optional <code>component</code> factory function for a WebComponent that gets mounted on the document's body. This is useful for tools that require user interaction or configurability.</li>
<li>An optional <code>server</code> hash of helper methods that get mounted on the Vite server (namespaced by the tool's name).</li>
</ul>
<p>The <code>handler</code> receives the <code>component</code> and <code>server</code> as properties on <code>this</code>:</p>
<ul>
<li>The <code>component</code> property is the DOM node for the WebComponent.</li>
<li>The <code>server</code> property is a <code>Proxy</code> that lets the tool remote-call the defined server-side methods.</li>
</ul>
<p>The built-in screenshot tool demonstrates all of these features. The tool's <code>handler</code> function is:</p>
<pre><code class="language-js">handler: async function (this: ToolContext) {
  const { dataUrl, quality, saveToDisk } = await this.component.captureScreenshot();

  const base64Data = dataUrl.split(",")[1];

  let savedPath: string | undefined;

  if (saveToDisk) {
    const { path } = await this.server.saveScreenshot({ dataUrl });
    savedPath = path;
  }

  const textContent = savedPath
    ? `Screenshot of current browser tab captured (quality: ${quality}, saved to: ${savedPath})`
    : `Screenshot of current browser tab captured (quality: ${quality})`;

  return {
    content: [
      {
        type: "text",
        text: textContent,
      },
      {
        type: "image",
        mimeType: "image/jpeg",
        data: base64Data,
      },
    ],
  };
},
...
</code></pre>
<h3 id="under-the-hood" tabindex="-1"><a class="permalink" href="#under-the-hood">Under the hood</a></h3>
<p>The plugin uses Vite's existing HMR (Hot Module Replacement) WebSocket connection for bi-directional RPC (Remote Procedure Call) with a bridge that gets injected into the page as a virtual module (so that <code>import.meta.hot</code> can be present). Tools' WebComponents are defined using additional script tags and get mounted on the document's body.</p>
<p>In the scripts injected into the page by the plugin, there's generous use of IIFE (Immediately Invoked Function Expression) for serialization and deserialization of server-defined functions while performing dependency injection. I'm not going to cover all the tips and tricks here. You can see them in action in the <a href="https://github.com/atesgoral/vite-plugin-mcp-client-tools/tree/main/src">source code</a> of the plugin.</p>
</div>

  
  <h3>Discourse</h3>
  <p class="meta">
    Comments, questions, corrections? Please drop them on
    <a href="https://bsky.app/profile/ates.dev/post/3m355kdy4v223">Bluesky!</a>
  </p>
  
</article>
</main>

    <footer>
      <hr />
      <p class="footer meta">
        &copy; Ateş Göral &middot;
        <a href="https://github.com/atesgoral/ates.dev">src</a> &middot;
        <a href="https://www.11ty.dev/">11ty</a>
      </p>
    </footer>

    <div id="dweet-length-template" style="display: none">
      <div class="length"><span></span>/140</div>
    </div>

    <div id="dweet-player-template" style="display: none">
      <p class="canvas-container">
        <span class="canvas-subcontainer dweet-container">
          <canvas class="white" width="1920" height="1080"></canvas>
        </span>
      </p>
    </div>
  </body>
</html>
