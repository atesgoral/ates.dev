<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta property="og:title" content="Dweeting Outside the Box" />
    <meta property="og:type" content="article" />
    <meta property="og:description" content="Demonstration of JavaScript golfing techniques by rendering the "default dweet" in different ways." />
    
    <meta
      property="og:image"
      content="https://ates.dev/posts/2024-12-21-dweeting-outside-the-box/i/default-dweet.png"
    />
    <meta property="og:image:alt" content="" />
    
    <meta property="og:locale" content="en_CA" />
    <meta property="og:site_name" content="ates.dev" />
    <title>ates.dev &middot; Dweeting Outside the Box</title>
    <script>
      (() => {
        const themeOverride = localStorage.getItem('theme-override');
        const lightMode = themeOverride && themeOverride === 'light';
        document.documentElement.classList.toggle('light-mode', lightMode);
      })();
    </script>
    <link
      rel="preload"
      href="/assets/fonts/varelaround-regular-webfont.woff2"
      as="font"
      crossorigin="anonymous"
    />
    <link
      rel="preload"
      href="/assets/logos/bluesky.svg"
      as="image"
      crossorigin="anonymous"
    />
    <link
      rel="preload"
      href="/assets/logos/github.svg"
      as="image"
      crossorigin="anonymous"
    />
    <link
      rel="icon"
      type="image/png"
      href="/assets/icons/favicon-96x96.png"
      sizes="96x96"
    />
    <link rel="icon" type="image/svg+xml" href="/assets/icons/favicon.svg" />
    <link rel="shortcut icon" href="/assets/icons/favicon.ico" />
    <link
      rel="apple-touch-icon"
      sizes="180x180"
      href="/assets/icons/apple-touch-icon.png"
    />
    <meta name="apple-mobile-web-app-title" content="ates.dev" />
    <link rel="manifest" href="/assets/icons/site.webmanifest" />
    <link rel="stylesheet" href="/styles/style.css" />
    <link rel="me" href="https://bsky.app/profile/ates.dev" />
    <link rel="me" href="https://www.dwitter.net/u/magna" />
    <link rel="me" href="https://github.com/atesgoral" />
    <link rel="me" href="https://www.npmjs.com/~atesgoral" />
    <link rel="me" href="https://hackaday.io/atesgoral" />
    <link rel="me" href="https://www.instagram.com/atesgoral" />
    <link rel="me" href="https://stackoverflow.com/users/23501/ates-goral" />
    <link rel="me" href="https://www.linkedin.com/in/atesgoral/" />
    <link rel="me" href="https://twitter.com/atesgoral" />
    <link rel="me" href="https://x.com/atesgoral" />
    <script src="/assets/js/prog.js?bust=1"></script>
  </head>
  <body>
    
    <script src="/lib/render.js"></script>
    
    <script src="/lib/dweet.js"></script>
    
    <header>
      <h1>
        <a href="/">ates.dev</a>
      </h1>
      <nav>
        <ul>
          <li>
            <a href="/">Home</a>
          </li>
          <li>
            <a
              href="/pages/all-posts"
              >Posts</a
            >
          </li>
          <li>
            <a
              href="/pages/all-pages"
              >Pages</a
            >
          </li>
          <li>
            <a
              href="/pages/about"
              >About</a
            >
          </li>
          <li class="break"></li>
          <li>
            <a
              href="https://bsky.app/profile/ates.dev"
              rel="me"
              class="bluesky logo"
              >Bluesky</a
            >
          </li>
          <li>
            <a href="https://github.com/atesgoral" rel="me" class="github logo"
              >GitHub</a
            >
          </li>
        </ul>
      </nav>
    </header>

    <main>
<article>
  <h2>Dweeting Outside the Box</h2>
  <p class="meta">Posted on Dec 21, 2024</p>

  <div class="content"><p>This is a continuation of my <a href="/posts/2024-12-20-intro-to-dwitter">previous post</a> on Dwitter, where I gave an
overview of <a href="https://www.dwitter.net/">Dwitter</a> and a few JavaScript golfing tricks.</p>
<p>The subject was the &quot;default dweet&quot;, which renders 9 bars swaying back and
forth. I'll keep the subject the same, but show rendering those 9 bars in
different ways.</p>
<p>Let's start with recalling the default dweet:</p>
<pre class="dweet play"><code class="language-js">c.width|=0;for(i=9;i--;)x.fillRect(400+i*100+S(t)*300,400,50,200)
</code></pre>
<h3 id="punching-holes" tabindex="-1"><a class="permalink" href="#punching-holes">Punching holes</a></h3>
<p>You can use <code>clearRect()</code> whenever you want to render a white rectangle over a
dark background because Dwitter sets the background of the canvas to white.</p>
<p>First, let's render our hole punchers in different colors to see their
positions:</p>
<pre class="dweet play no-length"><code class="language-js">// black background
x.fillStyle = "black";
x.fillRect(0, 0, 1920, 1080);

// punch out top
x.fillStyle = "hsl(0,100%,50%)";
x.fillRect(0, 0, 1920, 400);

// punch out bottom
x.fillStyle = "hsl(30,100%,50%)";
x.fillRect(0, 600, 1920, 480);

// left edge of bars
X = 400 + S(t) * 300;

// punch out left
x.fillStyle = "hsl(60,100%,50%)";
x.fillRect(0, 400, X, 200);

// punch out right
x.fillStyle = "hsl(90,100%,50%)";
x.fillRect(X + 850, 400, 1070 - X, 200); // punch out right

// punch out bars
for (i = 8; i--; ) {
  x.fillStyle = `hsl(${120 + i * 30},100%,50%)`;
  x.fillRect(X + 50 + i * 100, 400, 50, 200);
}
</code></pre>
<p>And with actually clearing out the rectangles, and with some minimal effort in
golfing this down in length:</p>
<pre class="dweet play"><code class="language-js">x.fillRect(0,0,1920,1080)
x.clearRect(0,0,1920,400)
x.clearRect(0,600,1920,480)
X=400+S(t)*300
x.clearRect(0,400,X,200)
x.clearRect(X+850,400,1070-X,200)
for(i=8;i--;)x.clearRect(X+50+i*100,400,50,200)
</code></pre>
<p>Let's properly golf this down to fit in 140 characters.</p>
<h4 id="exponential-notation" tabindex="-1"><a class="permalink" href="#exponential-notation">Exponential notation</a></h4>
<p><code>2e3</code>, which means <code>2 * 10^3</code>, is shorter than <code>2000</code>. And 2000 is a perfectly
good substitute for <code>1920</code> and <code>1080</code>. The canvas API doesn't mind if you
draw or clear outside of it. Let's replace some numbers:</p>
<pre class="dweet play"><code class="language-js">x.fillRect(0,0,2e3,2e3)
x.clearRect(0,0,2e3,400)
x.clearRect(0,600,2e3,480)
X=400+S(t)*300
x.clearRect(0,400,X,200)
x.clearRect(X+850,400,1070-X,200)
for(i=8;i--;)x.clearRect(X+50+i*100,400,50,200)
</code></pre>
<p>And let's introduce a utility function to clear rectangles to reduce repetition:</p>
<p class="meta">Check out my originals and remixes
over at Dwitter under "<a href="https://www.dwitter.net/u/magna/top">magna</a>" to see some of these tricks in action.</p>
</div>

  
</article>
</main>

    <footer>
      <hr />
      <p class="footer meta">
        &copy; Ate<span class="sh">s</span> GÃ¶ral &middot;
        <a href="https://github.com/atesgoral/ates.dev">src</a> &middot;
        <a href="https://www.11ty.dev/">11ty</a>
      </p>
    </footer>

    <div id="dweet-length-template" style="display: none">
      <div class="length"><span></span>/140</div>
    </div>

    <div id="dweet-player-template" style="display: none">
      <p class="canvas-container">
        <span class="canvas-subcontainer">
          <canvas class="fit white"></canvas>
        </span>
      </p>
    </div>
  </body>
</html>
